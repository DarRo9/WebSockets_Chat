# WebSocket Chat

Простой чат-сервер на WebSocket с использованием Go.

## Требования

- Go 1.21 или выше
- gorilla/websocket
- zap
- prometheus/client_golang

## Установка

```bash
go mod download
```

## Запуск сервера

```bash
go run cmd/server/main.go
```

Сервер запустится на порту 8000.

## Запуск клиента

```bash
go run client/client.go
```

## Тестирование

```bash
go test ./server/...
```

## Метрики Prometheus

Метрики доступны по адресу `http://localhost:8000/metrics`:

- `websocket_active_connections` - количество активных подключений
- `websocket_messages_received_total` - общее количество полученных сообщений
- `websocket_messages_sent_total` - общее количество отправленных сообщений

## Функциональность

- Сервер принимает WebSocket соединения на порту 8000
- При подключении клиент получает сообщение с его адресом
- Все сообщения от клиентов рассылаются всем подключенным клиентам
- При отключении клиента все остальные получают уведомление
- Клиент может отправлять сообщения с клавиатуры
- Все сообщения отображаются в консоли клиента