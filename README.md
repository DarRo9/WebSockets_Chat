# WebSocket Чат

Проект представляет собой многопользовательский чат с поддержкой WebSocket соединений. Реализован на Go с использованием gorilla/websocket для серверной части и предоставляет как веб-интерфейс, так и консольный клиент.

## Особенности

- Поддержка WebSocket соединений
- Многопользовательский режим
- Поддержка имён пользователей
- Веб-интерфейс с современным дизайном
- Консольный клиент для тестирования
- Логирование всех событий
- Метрики Prometheus для мониторинга
- Корректная обработка подключения/отключения пользователей

## Структура проекта

```
.
├── cmd/
│   └── server/
│       └── main.go         # Точка входа сервера
├── server/
│   ├── server.go          # Основная логика сервера
│   └── metrics.go         # Метрики Prometheus
├── client/
│   └── client.go          # Консольный клиент
├── static/
│   └── index.html         # Веб-интерфейс
└── go.mod                 # Зависимости проекта
```

## Требования

- Go 1.22 или выше
- Браузер с поддержкой WebSocket (для веб-интерфейса)

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/WebSockets_Chat.git
cd WebSockets_Chat
```

2. Установите зависимости:
```bash
go mod tidy
```

## Запуск

### Сервер

```bash
go run cmd/server/main.go
```

Сервер запустится на порту 8000.

### Веб-интерфейс

1. Откройте в браузере `http://localhost:8000`
2. Введите своё имя
3. Нажмите "Подключиться"
4. Начните общение

### Консольный клиент

```bash
go run client/client.go ИмяПользователя
```

## Использование

### Веб-интерфейс

- Введите сообщение в поле ввода
- Нажмите Enter или кнопку "Отправить"
- Системные сообщения отображаются серым цветом
- Сообщения пользователей отображаются синим цветом

### Консольный клиент

- Вводите сообщения после приглашения `>`
- Нажмите Enter для отправки
- Для выхода нажмите Ctrl+C

## Метрики

Сервер предоставляет метрики Prometheus по адресу `/metrics`:

- `chat_connections_total` - общее количество подключений
- `chat_messages_total` - общее количество сообщений
- `chat_active_connections` - текущее количество активных подключений

## Логирование

Сервер использует структурированное логирование с помощью zap:

- Информация о подключении/отключении пользователей
- Ошибки и предупреждения
- Метрики производительности

## Безопасность

- Проверка происхождения WebSocket соединений
- Безопасная обработка отключений
- Защита от переполнения буфера сообщений

## Лицензия

MIT